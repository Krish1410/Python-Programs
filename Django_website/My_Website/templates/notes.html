<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>Magic Notes</title>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand">Note in JS</a>
        <a href="/" class="navbar-brand">Text Editer</a>
        <form class="form-inline">
            <input id="serchTxt" onkerup="search_animal()" class="form-control mr-sm-2" type="search"
                placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </nav>
    <div id='Error'></div>
    <div class="container">
        <div class="card my-3">
            <div class="card-body">
                <h5 class="card-title">Add Title</h5>
                <div class="form-group">
                    <textarea class="form-control" id="textAdd" rows="3"></textarea>
                </div>
                <button id="Addbtn" class="btn btn-primary">Add to Note</button>
            </div>
        </div>
        <hr>
        <div class="row">
            <h3>Your Notes Hear</h3>
            <button onclick="DeletAll()" style="position: relative; left: 49rem;" class=" btn btn-danger">Delet All
                Notes</button>
        </div>
        <hr>
        <div id="Notes" class="row container mx-5">

        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <script>
        let AddBtn = document.getElementById('Addbtn');
        setNotes();
        AddBtn.addEventListener("click", function (e) {
            let addText = document.getElementById("textAdd");
            if (addText.value != '') {

                let notes = localStorage.getItem("notes");
                if (notes == null) {
                    noteObj = [];
                }
                else {
                    noteObj = JSON.parse(notes);
                }
                noteObj.push(addText.value);
                localStorage.setItem("notes", JSON.stringify(noteObj));
                addText.value = '';
                error = document.getElementById('Error')
                error.innerHTML = ''
                setNotes()
            }
            else {
                error = document.getElementById('Error')
                error.innerHTML = `<div class="alert alert-danger" role="alert">
        Please Enter a text
    </div>`
            }
        });

        function setNotes() {
            let notes = localStorage.getItem("notes");
            if (notes == null) {
                noteObj = [];
            }
            else {
                noteObj = JSON.parse(notes);
            }


            let html = "";
            noteObj.forEach(function (element, index) {
                html += `
        <div class="card mx-3 my-3" style="width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title">Note ${index + 1}</h5>
                    <p class="card-text">${element}</p>
                    <button id='${index}' onclick="DeletNote(this.id)" class="btn btn-primary">Delat Note</button>
                </div>
            </div>
        `;
            });
            let noteELe = document.getElementById('Notes')
            if (noteObj.length != 0) {
                noteELe.innerHTML = html
            }
            else {
                noteELe.innerHTML = `Nothing To See Hear...Please Add Note`
            }
        }


        function DeletNote(index) {
            let notes = localStorage.getItem("notes");
            if (notes == null) {
                noteObj = [];
            }
            else {
                noteObj = JSON.parse(notes);
            }

            noteObj.splice(index, 1)
            localStorage.setItem("notes", JSON.stringify(noteObj));
            setNotes();
        }

        function DeletAll() {
            localStorage.clear()
            location.reload()
        }


        // let search=document.getElementById('serchTxt')
        // search.addEventListener("input",function(){
        //     let inputVal=search.value.toLowerCase();

        //     let noteCards=document.getElementsByClassName('card');
        //     Array.from(noteCards).forEach(function(element){
        //         let cardtxt=document.getElementsByTagName('p')[0]
        //         cardTxt=cardtxt.innerText;
        //         if (cardTxt.includes(inputVal)){
        //             element.style.display="block"
        //         }
        //         else{
        //             element.style.display='none'
        //         }
        //     });
        // })
        function search_animal() {
            let input = document.getElementById('serchTxt').value
            input = input.toLowerCase();
            let x = document.getElementsByClassName('card-text');

            for (i = 0; i < x.length; i++) {
                if (!x[i].innerHTML.toLowerCase().includes(input)) {
                    x[i].style.display = "none";
                }
                else {
                    x[i].style.display = "block";
                }
            }
        }
    </script>
</body>

</html>